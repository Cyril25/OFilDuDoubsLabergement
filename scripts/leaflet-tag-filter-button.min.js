/*! leaflet-tag-filter-button.min.js v0.2.1 | MIT License | github.com/trek/leaflet-tag-filter-button */
(function(factory){if(typeof define==="function"&&define.amd){define(["leaflet"],factory);}else if(typeof module!=="undefined"){module.exports=factory(require("leaflet"));}else{if(typeof window.L!="undefined")factory(window.L);}}(function(L){L.Control.TagFilterButton=L.Control.extend({options:{data:[],icon:"<svg viewBox='0 0 24 24' width='18' height='18'><path fill='#333' d='M3 5h18v2H3V5m2 4h14v2H5V9m4 4h6v2H9v-2z'/></svg>",filterOnEveryClick:!1,clearText:"Clear",filterSelected:[],tagText:function(e){return e}},initialize:function(e){L.setOptions(this,e);this._filterSelected=this.options.filterSelected.slice();},onAdd:function(e){this._map=e;var t=L.DomUtil.create("div","leaflet-control-tagfilter leaflet-bar");this._container=t;this._button=L.DomUtil.create("a","leaflet-control-tagfilter-button",t);this._button.innerHTML=this.options.icon;this._button.href="#";L.DomEvent.on(this._button,"click",this._togglePanel,this);this._panel=L.DomUtil.create("div","leaflet-control-tagfilter-panel",t);this._panel.style.display="none";this._panel.innerHTML=this._renderPanel();L.DomEvent.on(this._panel,"click",L.DomEvent.stopPropagation);L.DomEvent.on(this._panel,"mousedown",L.DomEvent.stopPropagation);L.DomEvent.on(this._panel,"dblclick",L.DomEvent.stopPropagation);L.DomEvent.on(this._panel,"mousewheel",L.DomEvent.stopPropagation);L.DomEvent.on(this._panel,"MozMousePixelScroll",L.DomEvent.stopPropagation);return t;},onRemove:function(e){},_togglePanel:function(e){L.DomEvent.stop(e);this._panel.style.display=this._panel.style.display==="none"?"block":"none";},_renderPanel:function(){var e=this.options.data,t=this._filterSelected,n=this.options.clearText,r='<div class="leaflet-control-tagfilter-list">';for(var i=0;i<e.length;i++){var o=e[i],a=t.indexOf(o)>-1?"checked":"",s=this.options.tagText(o);r+='<label class="ripple"><input type="checkbox" value="'+o+'" '+a+'> '+s+"</label>"}r+="</div>";r+='<button type="button" class="leaflet-control-tagfilter-clear">'+n+"</button>";return r;},getSelected:function(){return this._filterSelected.slice();},setSelected:function(e){this._filterSelected=e.slice();this._updatePanel();},_updatePanel:function(){this._panel.innerHTML=this._renderPanel();var e=this;var t=this._panel.querySelectorAll("input[type=checkbox]");for(var n=0;n<t.length;n++){t[n].addEventListener("change",function(){e._onCheckboxChange(this.value,this.checked);});}this._panel.querySelector(".leaflet-control-tagfilter-clear").addEventListener("click",function(){e._onClear();});},_onCheckboxChange:function(e,t){var n=this._filterSelected.indexOf(e);t?n===-1&&this._filterSelected.push(e):n!==-1&&this._filterSelected.splice(n,1);this.fire("changed",{selected:this.getSelected()});if(this.options.filterOnEveryClick)this._updatePanel();},_onClear:function(){this._filterSelected=[];this._updatePanel();this.fire("changed",{selected:this.getSelected()});}});L.control.tagFilterButton=function(e){return new L.Control.TagFilterButton(e);};}));
