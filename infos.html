<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Balises Open Graph -->
        <meta property="og:title" content="O'Fil du Doubs" />
        <meta property="og:description" content="Bienvenue à O'Fil du Doubs, votre logement touristique à Labergement-Sainte-Marie." />
        <meta property="og:image" content="https://cyril25.github.io/OFilDuDoubsLabergement/images/banniere/vue-balcon-2.jpg" />
        <meta property="og:url" content="https://cyril25.github.io/OFilDuDoubsLabergement/test_menu_fixe/" />
        <meta property="og:type" content="website" />

        <!-- Balise pour Twitter (optionnelle mais recommandée) -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https://cyril25.github.io/OFilDuDoubsLabergement/images/banniere/vue-balcon-2.jpg">

    <title>O'Fil du Doubs - Location de charme</title>
    <link rel="stylesheet" href="styles.css">
    <script src="scripts/menu-translations.js"></script>
    <script src="scripts/infos-translations.js"></script> <!-- Attention à modifier pour chaque page -->
    <script src="scripts/applyTranslations.js"></script>
</head>
<body>
    <!-- Conteneur pour le menu -->
    <div id="menu-container"></div>
    <header class="header2">
        <h1 id="title">Informations pratiques</h1>
    </header>
    <main>
        <section>
            <p id="description">Situé à Labergement-Sainte-Marie, notre logement vous offre un cadre idéal pour un séjour relaxant au cœur du Jura.</p>
            <img src="images/vue-balcon.jpg" alt="Vue depuis le balcon" class="view-image">
        </section>
        <section>
            <h2 id="welcome">Bienvenue chez Alisson et Cyril - O'Fil du Doubs</h2>
            <p id="description">Situé à Labergement-Sainte-Marie, notre logement vous offre un cadre idéal pour un séjour relaxant au cœur du Jura.</p>
            <img src="images/vue-balcon.jpg" alt="Vue depuis le balcon" class="view-image">
        </section>
        <section>
            <h2 id="welcome">Bienvenue chez Alisson et Cyril - O'Fil du Doubs</h2>
            <p id="description">Situé à Labergement-Sainte-Marie, notre logement vous offre un cadre idéal pour un séjour relaxant au cœur du Jura.</p>
            <img src="images/vue-balcon.jpg" alt="Vue depuis le balcon" class="view-image">
        </section>
        <section>
            <h2>Disponibilités</h2>
            <div id="calendar"></div> <!-- C'est ici que les événements seront affichés -->
        </section>
    </main>
    <footer>
        <p>© O'Fil du Doubs - Tous droits réservés</p>
    </footer>
    <script>
        // Effectuer une requête vers ton serveur pour obtenir le fichier .ics
        fetch('https://ical-proxy-node.onrender.com/ical')
            .then(response => response.text())  // Traiter la réponse en tant que texte
            .then(data => {
                // Afficher le contenu brut du fichier .ics (si tu veux l'afficher tel quel)
                document.getElementById('calendar').innerText = data;

                // Si tu veux parser le fichier .ics et afficher les événements de manière plus lisible :
                const parsedEvents = parseICS(data);
                displayEvents(parsedEvents);
            })
            .catch(error => console.error('Erreur lors de la récupération du fichier iCal:', error));

        // Fonction pour parser le contenu iCalendar (fichier .ics)
        function parseICS(icsData) {
            // C'est un exemple simple qui te permettra d'extraire les événements du fichier .ics
            const events = [];
            const eventPattern = /BEGIN:VEVENT[\s\S]+?END:VEVENT/g;  // Trouver chaque événement
            const eventsRaw = icsData.match(eventPattern);

            if (eventsRaw) {
                eventsRaw.forEach(event => {
                    const eventDetails = {};
                    const summaryPattern = /SUMMARY:(.*)/;
                    const datePattern = /DTSTART;.*:(\d{8}T\d{6})/;

                    const summary = event.match(summaryPattern);
                    const date = event.match(datePattern);

                    if (summary && date) {
                        eventDetails.summary = summary[1];
                        eventDetails.date = date[1];
                        events.push(eventDetails);
                    }
                });
            }
            return events;
        }

        // Fonction pour afficher les événements sur la page
        function displayEvents(events) {
            const calendarDiv = document.getElementById('calendar');
            events.forEach(event => {
                const eventDiv = document.createElement('div');
                eventDiv.innerHTML = `<strong>${event.summary}</strong> - ${event.date}`;
                calendarDiv.appendChild(eventDiv);
            });
        }
    </script>
</body>
</html>